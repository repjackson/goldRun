template(name='user_credit')
    .ui.stackable.two.column.grid
        if is_current_user
            .column
                .ui.header 
                    |withdraw
                |$10 minimum, takes one business day 
                .ui.action.fluid.input
                    input.withdrawal_amount(type='number' min='1' max=currentUser.credit placeholder='amount')
                    .ui.icon.button.initial_withdrawal 
                        i.right.chevron.icon
                .ui.small.header withdrawals
                .ui.bulleted.list
                    each withdrawals
                        .item
                            .ui.header #{when} for #{amount} credit
                            |status: #{status}
                            .ui.button.cancel_withdrawal
                                i.ban.icon
                                |cancel
            .column
                .ui.header 
                    |deposits
                |deposits are given +5% credit after credit card processing fee
                .ui.action.fluid.input
                    input.deposit_amount(type='number' min='1' placeholder='deposit')
                    .ui.icon.button.add_credits   
                        i.right.chevron.icon
                        
                .ui.large.bulleted.list
                    each deposits
                        .item 
                            .content
                                .header 
                                    |$#{amount} + #{bonus}c
                                .description #{when} {{long_date _timestamp}}
                                //- if is_dev
                                +remove_button



template(name='user_dashboard')
    .ui.stackable.grid
        .two.column.row
            .column
                .ui.header
                    +i name='clock'
                    |current orders


template(name='user_finance')
    .ui.stackable.two.column.grid
        if is_current_user
            .column
                .ui.header 
                    +i name='initiate-money-transfer'
                    |withdraw
                |$42 minimum, takes one business day 
                .ui.action.fluid.input
                    input.withdrawal_amount(type='number' min='1' max=currentUser.credit placeholder='amount')
                    .ui.icon.button.initial_withdrawal 
                        i.right.chevron.icon
                .ui.small.header withdrawals
                .ui.bulleted.list
                    each withdrawals
                        .item
                            .ui.header #{when} for #{amount} credit
                            |status: #{status}
                            .ui.button.cancel_withdrawal
                                i.ban.icon
                                |cancel
            .column
                .ui.header 
                    +i name='initiate-money-transfer'
                    |deposits
                |deposits are given +5% credit after credit card processing fee
                .ui.action.fluid.input
                    input.deposit_amount(type='number' min='1' placeholder='deposit')
                    .ui.icon.button.add_credits   
                        i.right.chevron.icon
                        
                .ui.large.bulleted.list
                    each deposits
                        .item 
                            .content
                                .header 
                                    |#{deposit_amount}c + #{bonus}c
                                .description #{when} {{long_date _timestamp}}
                                if is_dev
                                    +remove_button
    .ui.grid      
        .three.column.row
            .column
                .ui.segment
                    .ui.small.header 
                        strong $#{ssd.total_credit_amount}
                        small total weekly income
                    .ui.small.header
                        strong #{ssd.credit_count}
                        small credits
            .column
                .ui.segment
                    .ui.small.header
                        strong $#{ssd.total_debit_amount}
                        small total weekly expenses
                    .ui.small.header
                        strong #{ssd.debit_count}
                        small debits
            .column
                .ui.segment
                    .ui.small.header
                        |growth from last week
        .two.column.row
            .column
                .ui.segment
                    .ui.header 
                        |weekly credits
                    //- .ui.bulleted.list
                    //-     each user_credits
                    //-         .item 
                    //-             |#{amount}
                    //-             if icon
                    //-                 +i name=icon
                    //-             strong #{text}
                    //-             small #{when}
                    .ui.feed.mediumscroll
                        each user_credits
                            .event 
                                .label
                                    if is_credit
                                        i.grey.chevron.up.icon
                                    if is_debit
                                        i.grey.chevron.down.icon
                                    else if icon
                                        i.grey.icon(class=icon)
                                .content
                                    .summary
                                        a.user(href="/user/#{target_user.username}")
                                            |#{target_user.name}
                                        |#{text}
                                        .date #{when}
                                    .meta
                                        +voting_small
                                        //- a.like
                                        //-     i.like.icon 
                                        //-     |4 likes
                                        a.remove
                                            i.grey.undo.icon
                                        //- if is_dev
                                        //-     +remove_button
            .column
                .ui.segment
                    .ui.header 
                        i.chevron.down.icon
                        |weekly debits
                    .ui.feed.mediumscroll
                        each user_debits
                            .event 
                                .label
                                    if is_credit
                                        i.chevron.up.icon
                                    if is_debit
                                        i.chevron.down.icon
                                    else if icon
                                        i.icon(class=icon)
                                .content
                                    .summary
                                        a.user(href="/user/#{target_user.username}")
                                            |#{target_user.name}
                                        |#{text}
                                        .date #{when}
                                    .meta
                                        +voting_small
                                        //- a.like
                                        //-     i.like.icon 
                                        //-     |4 likes
                                        a.remove
                                            i.grey.undo.icon
                                        //- if is_dev
                                        //-     +remove_button
                        //- +range_edit                
            //- .column 
            //-     .ui.header offer
            //-     .ui.button.add_offer
            //-         |+ offer
        

template(name='user_reservations')
    .scrolling
        .ui.segments
            each reservations 
                +profile_reservation_item

template(name='profile_reservation_item')
    .ui.segment.grid
        .row
            .twelve.wide.column
                .ui.header #{rental.title}
        .row
            .four.wide.column
                with rental
                    //- img.ui.mini.image(src=image)
                    +image_view key='image' direct=true classes='zoom ui tiny image'
            .twelve.wide.column
                a.ui.header.inline.lowercase(href="/reservation/#{_id}/view")
                    small from 
                    |{{cal_time start_datetime}}
                a.ui.header.inline.lowercase(href="/reservation/#{_id}/view")
                    small to 
                    |{{cal_time end_datetime}}
                div
                .ui.grey.inline.header #{hour_duration} hrs
                .ui.grey.inline.header(title='credits')
                    i.coins.icon
                    | #{cost}
                .ui.small.inline.header #{when} by #{_author_username}
                a.ui.large.button(href="/reservation/#{_id}/view")
                    |view
                    i.right.chevron.icon
                if is_admin
                    +remove_button



template(name='user_rentals')
    .ui.three.cards
        each rentals 
            +rental_card
        
        
template(name='user_handling')
    .ui.small.header rentals that member is facilitating
    .ui.three.cards
        each handling_rentals 
            +user_rental_card
        
        
        
template(name='user_rental_card')
    .ui.small.card
        a.zoom(href="/rental/#{_id}/view")
            img.ui.centered.image(src="{{c.url image height=200 width=200 background='white' crop='pad'}}")
        .content
            a.ui.inline.header(href="/rental/#{_id}/view") #{title} 
                if variable_price
                    |~
                if hourly_dollars
                    .ui.label #{hourly_dollars}c/hr
                if daily_dollars
                    .ui.label #{daily_dollars}c/day
            //- if hourly_karma
            //-     +ismall name='yin-yang'
            //-     |#{hourly_karma}/hr
            //- if daily_karma
            //-     +ismall name='yin-yang'
            //-     | #{daily_karma}/day
            +rental_status
        .content
            span(title='views')
                +ismall name='eye'
                |#{views}
            div
            +ismall name='marker'
            each location_tags
                .ui.label #{this}
            div
            +ismall name='tags'
            each tags
                .ui.label #{this}
            +user_list_toggle key='bookmark_ids' add_icon='bookmark outline' remove_icon='bookmark' add_label='bookmark' remove_label='unbookmark'  big=true
            div
            a.ui.button(href="/rental/#{_id}/view")
                |view
                i.right.chevron.icon
            +reserve_button
