template(name='search')
    .ui.stackable.padded.grid 
        .sixteen.wide.column
            +i name='search' cl='ui inline image'
            .ui.big.icon.input.inline
                if current_query
                    i.large.red.remove.link.icon.clear_query
                else
                    i.search.large.icon
                input.global_search(type='text' value=current_query autofocus='' placeholder='search...')
            if results.count
                .ui.inline.header #{results.count} results
            .scrolling.ui.four.stackable.link.cards
                each results
                    a.ui.card.zoomer(href="/#{model}/#{_id}")
                        if image_id
                            img.ui.image(src="{{c.url image_id width=500 height=500 }}")
                        .content
                            .ui.inline.header #{title}
                            .ui.inline.small.grey.header #{when}
                            .ui.inline.small.grey.header 
                                img.ui.avatar.image(src="{{c.url author.image_id width=200 height=200 gravity='face' crop='fill'}}")
                                |#{_author_username}
                            if tags 
                                i.grey.tag.icon
                                each tags 
                                    .ui.basic.label #{this}
                            if model
                                .ui.basic.label(title='model')
                                    i.grey.database.icon
                                    |#{model}