template(name='music')
    .ui.stackable.padded.grid 
        .sixteen.wide.column
            .ui.inline.header 
                i.music.icon
                |#{artist_docs.count} artists
            if current_search 
                i.large.red.circular.link.remove.icon.clear
            .ui.large.input 
                input.artist_search(type='text' placeholder='search artist...' value=current_search)
            +i name='tags'
            |tags
            each picked_music_tags
                button.ui.blue.compact.circular.button.unpick_tag(tabindex='0')
                    //- i.remove.icon
                    | #{this}
            each music_tag_results
                button.ui.circular.compact.black.button.pick_tag(tabindex="0" class=result_class title=count)
                    |#{name}
                    // small #{count}

        .four.wide.column.scrolling
            div
            .ui.inline.header
                .ui.small.inline.header
                    +i name='music'
                    |#{genre_results.count} genres
                each picked_genres
                    button.ui.blue.compact.circular.button.unpick_genre(tabindex='0')
                        //- i.remove.icon
                        | #{this}
                each genre_results
                    button.ui.circular.compact.black.button.pick_genre(tabindex="0" class=result_class title=count)
                        |#{name}
                        // small #{count}
            div
            .ui.inline.header
                +i name='artist'
                |styles
            each picked_styles
                button.ui.blue.compact.circular.button.unpick_style(tabindex='0')
                    //- i.remove.icon
                    | #{this}
            each style_results
                button.ui.circular.compact.black.button.pick_style(tabindex="0" class=result_class title=count)
                    |#{name}
                    // small #{count}
            div
            .ui.inline.header
                +i name='happy'
                |#{mood_results.count} moods
            each picked_moods
                button.ui.blue.compact.circular.button.unpick_mood(tabindex='0')
                    //- i.remove.icon
                    | #{this}
            each mood_results
                button.ui.circular.compact.black.button.pick_mood(tabindex="0" class=result_class title=count)
                    |#{name}
                    // small #{count}
        .twelve.wide.column
            unless one_result
                .ui.inline.header(title='result count') #{result_docs.count}
                // +search_input key='title'
                +sort_direction_toggle
                // +sort_key_toggle
                +session_set key='sort_key' value='_timestamp' label='added' icon='clock'
                +session_set key='sort_key' value='points' label='points' icon='hashtag'
                +session_set key='sort_key' value='views' label='views' icon='eye'
                // +session_set key='limit' value=10
                // +session_set key='limit' value=25
                // +session_set key='limit' value=100
            .ui.hidden.divider
            .ui.centered.stackable.cards.scrolling
                if subs_ready
                    if one_result
                        .ui.one.cards
                            each artist_docs 
                                +artist_card
                    else
                        .ui.centered.cards
                            each artist_docs 
                                +artist_card
                else 
                    .ui.center.aligned.basic.segment
                        i.massive.yin.yang.loading.grey.icon
            // .ui.inline.header search songs
            // .ui.input 
            //     input(type='text' placholder='song...')
            // .ui.list 
            //     each song_docs 
            //         .ui.header #{title}
            // .ui.inline.header search albums
            // .ui.input 
            //     input(type='text' placholder='album...')
            // .ui.list 
            //     each album_docs 
            //         .ui.header #{title}
            

template(name='artist_card')
    a.card.fly_right(href="/music/artist/#{_id}" title='view artist')
        img.ui.image(src=strArtistThumb)
        .content
            img.ui.image(src=strArtistLogo title=strArtist)
            .description
                .ui.inverted.basic.label
                    +i name='music'
                    |#{strGenre}
                .ui.inverted.basic.label
                    +i name='artist'
                    |#{strStyle}
                .ui.inverted.basic.label
                    +i name='happy'
                    |#{strMood}
                each five_tags
                    .ui.inverted.basic.label #{this}
                |added #{_when}
                |#{points}pts
                |#{views} views

template(name='music_artist')
    with current_artist 
        if strArtistBanner
            img.ui.image.profile_banner(src=strArtistBanner)
        .ui.stackable.padded.grid 
            .eight.wide.column.scrolling
                a.ui.inverted.big.button.fly_left(href='/music')
                    i.chevron.left.icon
                    i.music.large.icon
                    |music
                img.ui.image(src=strArtistThumb)
                img.ui.image(src=strArtistWideThumb)
                if strArtistCutout
                    img.ui.image(src=strArtistCutout)
                if strArtistClearart
                    img.ui.image(src=strArtistClearart)
                .ui.header views: #{views}
                +voting_full
                div
                +i name='tags'
                each tags 
                    a.ui.inverted.basic.link.label.zoomer.pick_flat_tag(title='browse tag') #{this}
                +print_this
            .eight.wide.column.scrolling
                img.ui.image(src=strArtistLogo)
                .ui.massive.inline.header #{strArtist}
                if strFacebook
                    a.ui.big.basic.compact.inverted.button(href=strFacebook target='_window' title='view facebook profile')
                        +i name='facebook'
                if strTwitter
                    a.ui.big.basic.compact.inverted.button(href=strTwitter target='_window' title='view twitter page')
                        +i name='twitter'

                .ui.large.list
                    // .item #{strArtistStripped}: strArtistStripped
                    if strArtistAlternate
                        .item alternate name: #{strArtistAlternate}
                    if strLabel
                        .item label: #{strLabel}
                    // .item #{idLabel}: idLabel
                    if intFormedYear
                        .item
                            i.clock.icon
                            |formed: 
                            |#{intFormedYear}-
                    // if intBornYear
                    //     .item born #{intBornYear}
                    if intDiedYear
                        .item died #{intDiedYear}
                    if strDisbanded
                        .item disbanded #{strDisbanded}
                    if strCountry
                        .item
                            +i name='marker'
                            |#{strCountry}
                    .item 
                        +i name='artist'
                        |style: #{strStyle}
                    .item 
                        +i name='music'
                        |#{strGenre}
                    .item 
                        +i name='happy'
                        |mood: #{strMood}
                    .item
                        a(href=strWebsite target='_window')
                            |#{strWebsite}
                |#{strBiographyEN}
                +call_watson key='strBiographyEN'
                +comments
            .sixteen.wide.column
                if watson 
                    +watson_view_full
